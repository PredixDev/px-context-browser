<link rel="import" href="px-context-browser-column.html"/>

<dom-module id="demo-context-browser2">
  <template>
    <style>
      #column1 { background-color: red }
      #column2 { background-color: salmon }
      #column3 { background-color: pink }
      #column4 { background-color: purple }
      #column5 { background-color: orange }

      :host {
        --single-item: 20px;
      }

      px-context-browser-column {
        display: block;
        position: relative;
        width: 300px;
        height: 0px;
        min-height: var(--single-item);
        transition: min-height 650ms ease;
        background-color: lime;
        overflow: hidden;
      }

      .col {
        background-color: salmon;
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        min-height: var(--single-item);
      }

      px-context-browser-column[item-count] {
        min-height: 200px;
      }

      px-context-browser-column[item-count="1"] {
        min-height: 20px;
      }

      px-context-browser-column[item-count="2"] {
        min-height: 40px;
      }

      px-context-browser-column[item-count="3"] {
        min-height: 60px;
      }

      px-context-browser-column[item-count="4"] {
        min-height: 80px;
      }

      px-context-browser-column[item-count="5"] {
        min-height: 100px;
      }

      px-context-browser-column[item-count="6"] {
        min-height: 120px;

      }

      px-context-browser-column[item-count="7"] {
        min-height: 140px;
      }

      px-context-browser-column[item-count="8"] {
        min-height: 160px;
      }

      px-context-browser-column[item-count="9"] {
        min-height: 180px;
      }

      px-context-browser-column[item-count="10"] {
        min-height: 200px;
      }

      .entry {
        display: block;
        height: var(--single-item);
      }

      @keyframes fadeInRight {
        from {
          opacity: 0;
          transform: translateX(-100%);
        }

        to {
          opacity: 1;
          transform: none;
        }
      }

      @keyframes fadeOutRight {
        from {
          opacity: 1;
          transform: none;
        }
        to {
          opacity: 0;
          transform: translateX(100%);
        }
      }

      @keyframes fadeInLeft {
        from {
          opacity: 0;
          transform: translateX(100%);
        }

        to {
          opacity: 1;
          transform: none;
        }
      }

      @keyframes fadeOutLeft {
        from {
          opacity: 1;
          transform: none;
        }
        to {
          opacity: 0;
          transform: translateX(-100%);
        }
      }

      /*.thingy {
        margin-top: 20px;
        display: block;
        width: 150px;
        border: 1px solid red;
        height: 0;
        transition: min-height 1.2s ease;
      }
      .thingy p {
        margin: 0;
      }*/
      .buttons {
        position: fixed;
        bottom: 100px;
      }
    </style>

    <array-selector id="selector" items="[[things.allThings]]" selected="{{selectedThing}}"></array-selector>

    <px-context-browser-column active$="{{selectedList._index}}" item-count$="{{selectedList.renderedItemCount}}">
      <template is="dom-repeat" items="[[lists]]" as="list">
        <div column$="[[list._index]]" class="col" slot="columns">
          <template is="dom-repeat" items="[[list.items]]" as="entry" rendered-item-count="{{list.renderedItemCount}}">
            <div class="entry">[[entry]]</div>
          </template>
        </div>
      </template>
    </px-context-browser-column>

    <div class="buttons">
    <button on-tap="_selectCol0">0</button>
    <button on-tap="_selectCol1">1</button>
    <button on-tap="_selectCol2">2</button>
    </div>
    <!-- <div id="column2" column="2" class="col" slot="columns"></div>
    <div id="column3" column="3" class="col" slot="columns"></div>
    <div id="column4" column="4" class="col" slot="columns"></div>
    <div id="column5" column="5" class="col" slot="columns"></div> -->

    <!-- <px-context-browser-listable>
    </px-context-browser-listable> -->

    <!-- <div class="thingy">
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eum accusamus velit, molestiae natus autem eius deleniti hic nihil sint veniam corporis assumenda quae necessitatibus sit, quaerat error voluptates neque, laborum.</p>
    </div> -->
  </template>
  <script>
    Polymer({
      is: 'demo-context-browser2',
      properties: {
        lists: {
          type: Array,
          value: function() {
            return [
              {
                _index: 0,
                items: ['L0 -- Apples','L0 -- Oranges','L0 -- Peaces','L0 -- Pears', 'L0 -- Bananas','L0 -- Apples','L0 -- Oranges','L0 -- Peaces','L0 -- Pears', 'L0 -- Bananas', 'L0 -- 10'],
                renderedItemCount: null
              },
              {
                _index: 1,
                items: ['L2 -- Apples','L2 -- Oranges','L2 -- Peaces','L2 -- Pears'],
                renderedItemCount: null
              },
              {
                _index: 2,
                items: ['L2 -- Apples','L2 -- Oranges','L2 -- Peaces'],
                renderedItemCount: null
              },
            ]
          }
        },
        foo: {
          type: String,
          value: 'foo'
        },
        calcd: {
          type: String,
          value: 'zzz',
          computed: '_getCalcd(foo, calcd)'
        },

        things: {
          type: Object,
          value: function() {
            return {
              allThings: [{name:'foo'}]
            }
          }
        },

        theThing: {
          type: Object
        }
      },

      observers: ['_say(selectedThing.name)'],

      ready() {
        // this.theThing = this.things[0].name;
        // this.linkPaths('theThing', 'things.0.name');
        this.$.selector.select(this.things.allThings[0]);
      },

      _say(name) {
        console.log('say: '+name);
      },

      _getCalcd(foo, calcd) {
        return foo + 'zzz';
      },

      _selectCol0: function() {
        this.selected = this.$.selector.select(this.lists[0]);
      },
      _selectCol1: function() {
        this.selected = this.$.selector.select(this.lists[1]);
      },
      _selectCol2: function() {
        this.selected = this.$.selector.select(this.lists[2]);
      }
    });
  </script>
</dom-module>
